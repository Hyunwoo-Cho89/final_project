<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.care.root.officer.dao.OfficerDAO">
	<resultMap type="com.care.root.officer.dto.OfficerDTO"
		id="officer">
		<result property="idNum" column="id_num" />
		<result property="name" column="name" />
		<result property="pw" column="pw" />
		<result property="residentNum" column="resident_num" />
		<result property="phoneNum" column="phone_num" />
		<result property="telNum" column="tel_num" />
		<result property="addr" column="addr" />
		<result property="detailAddr" column="detail_addr" />
		<result property="email" column="email" />
		<result property="major" column="major" />
		<result property="grade" column="grade" />
		<result property="class_" column="class" />
		<result property="country" column="country" />
		<result property="mentor" column="mentor" />
		<result property="zipcodeSend" column="zipcode_send" />
		<result property="smsSend" column="sms_send" />
		<result property="position" column="position" />
		<result property="imageFile" column="image_file" />
		<result property="officeAddr" column="office_addr" />
		<result property="bank" column="bank" />
		<result property="accountNum" column="account_num" />
	</resultMap>

	<select id="staffInfo" resultMap="officer">
		select * from member_info where
		id_num = #{id}
	</select>

	<insert id="insertStu">
		insert into member_info (id_num, name, pw,
		resident_num, country, mentor, grade, class, phone_num, major,
		position) values
		(#{idNum}, #{name}, #{pw}, #{residentNum}, #{country},
		#{mentor},
		#{grade}, #{class_}, #{phoneNum}, #{major}, #{position})
	</insert>

	<select id="findProfessor" resultType="String">
		select name from
		member_info where major = #{major} and position = '교수'
	</select>

	<select id="findinfo" resultMap="officer">
		select B.* from(select rownum rn, A.* from
		(select * from member_info where major = #{major} and position = '학생' order by grade desc)A)B where rn between #{s} and #{e}
	</select>

	<!-- 
	<select id="findinfo" resultMap="officer">
		select * from member_info where
		major = #{major} and position = '학생'
	</select>
	 -->

	<select id="findAll" resultMap="officer">
		select B.* from(select rownum rn, A.* from
		(select * from member_info where position = '학생' order by grade desc)A)B where rn between #{s} and #{e}
	</select>
	
	<!-- 
	<select id="findAll" resultMap="officer">
		select * from member_info where
		position = '학생'
	</select>
	 -->
	 
	<select id="searchStudent" resultMap="officer">
		select * from member_info
		where ${searchS} = #{searchT} and major = #{searchM} and position =
		'학생'
	</select>

	<select id="searchAll" resultMap="officer">
		select * from member_info
		where
		${searchS} = #{searchT} and position = '학생'
	</select>

	<select id="studentInfo" resultMap="officer">
		select * from member_info
		where id_num = #{idNum}
	</select>

	<select id="selectStudentCount" resultType="Integer">
		select count(*) from member_info where position = '학생'
	</select>
	
	<select id="selectMajorStudentCount" resultType="Integer">
		select count(*) from member_info where major = #{major} and position = '학생'
	</select>
</mapper>